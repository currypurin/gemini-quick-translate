# Gemini Quick Translate

## 概要
英語テキストを選択するだけで即座に翻訳結果をストリーミング表示するChrome拡張です。ページ内に小さなポップアップが現れ、Gemini 2.5 Flashlight APIを利用して自然な日本語訳を届けます。最新の翻訳20件は履歴ビューからいつでも見返せます。


## 主な機能
- テキスト選択時に自動ポップアップが表示され、翻訳をワンクリックで開始
- 翻訳結果は受信と同時に順次描画され、進捗メッセージでステータスがわかる
- 最新20件の翻訳履歴を拡張ポップアップで閲覧（件数は設定で変更可能）
- 丁寧語／カジュアルのトーン切り替え、APIキー管理などの基本設定をオプションページで提供

## セットアップ
1. このリポジトリを`git clone`するか、ビルド済みZIP（`dist/`を含む）を展開します。
2. Chromeで`chrome://extensions`を開き、右上の「デベロッパーモード」をオンにします。
3. 「パッケージ化されていない拡張機能を読み込む」からプロジェクトのフォルダを選択します。
4. 拡張カードの「詳細」→「オプション」を開き、Gemini APIキーを登録します。

### 開発者向け
- コードを変更する場合は、`npm install`で依存関係を入れ、`npm run dev`（ウォッチ）や`npm run build`（単発ビルド）を実行して`dist/`を更新したうえでコミットしてください。

## 使い方
1. 任意のWebページで翻訳したい英語テキストを選択します。
2. 選択範囲の近くに表示されるポップアップで内容を確認し、「翻訳」をクリックします。
3. ステータス欄が「翻訳中…」から「翻訳完了」に変わると全文が表示されます。
4. 同じページで複数回翻訳した場合でも、最新の結果から順に履歴へ保存されます。

## 履歴と設定
- **履歴ビュー**: 拡張アイコンをクリックすると最新20件までの翻訳が時系列で表示されます。詳細操作は用意せず、訳文を素早く見返すことに特化しています。
- **履歴件数**: オプションページで件数を変更できます（既定値20件、最大50件）。
- **トーン**: 丁寧語／カジュアルを選択できます。選択は次回以降も保持されます。
- **APIキー管理**: Gemini APIキーの保存・再入力が可能です。キーは`chrome.storage.local`に暗号化せず保存されるため、共有端末では取扱いに注意してください。

## トラブルシューティング
- **403エラーが表示される**: APIキーが誤っている、Generative Language APIが有効化されていない、または利用制限に達しています。Google Cloud Consoleでキーと割り当てを確認し、オプションページで再設定してください。
- **Extension context invalidated**: Chromeのサービスワーカーが再起動した際の通知です。拡張を再読み込みし、もう一度翻訳を試してください。

## 要求される権限
- `activeTab`: 現在のタブで選択中のテキストを読み取り、ポップアップを描画するため。
- `scripting`: 必要に応じてコンテンツスクリプトを注入するため。
- `storage`: APIキーやトーン設定、翻訳履歴を保存するため。
- `contextMenus`（任意）: 右クリックメニューから翻訳を実行するため。

## ライセンスと注意事項
- Gemini Flashlight APIの利用にはGoogleの利用規約が適用されます。APIキーの管理や料金発生についてはご自身でご確認ください。
- 本拡張は開発中のプロジェクトです。予告なく仕様が変更される可能性があります。
