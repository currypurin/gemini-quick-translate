# Gemini Quick Translate

## 概要
英語テキストを選択するだけで即座に翻訳結果をストリーミング表示するChrome拡張です。ページ内に小さなポップアップが現れ、Gemini 2.5 Flashlight APIを利用して自然な日本語訳を届けます。現在は翻訳履歴ビューやトーン切り替え機能は実装していません。


## 主な機能
- テキスト選択時に自動ポップアップが表示され、翻訳をワンクリックで開始
- 翻訳結果は受信と同時に順次描画され、進捗メッセージでステータスがわかる
- オプションページからGemini APIキーを登録すると、その以降の翻訳に利用される
- 翻訳バブルの文字サイズ（11px～80px）と横幅（240px～1200px）をポップアップから調整可能

## セットアップ
1. このリポジトリを`git clone`するか、ビルド済みZIP（`dist/`を含む）を展開します。
2. Chromeで`chrome://extensions`を開き、右上の「デベロッパーモード」をオンにします。
3. 画面左上の「パッケージ化されていない拡張機能を読み込む」をクリックし、プロジェクトのフォルダ（`manifest.json`がある階層）を選択します。
4. 拡張一覧に「Gemini Quick Translate」が表示されたら、カード右下の「オプション」をクリックして設定ページに移動します。表示されない場合は、カード内の「詳細」を開いた先にある「オプション」をクリックしてください。

### 開発者向け
- コードを変更する場合は、`npm install`で依存関係を入れ、`npm run dev`（ウォッチ）や`npm run build`（単発ビルド）を実行して`dist/`を更新したうえでコミットしてください。

## 使い方
1. 任意のWebページで翻訳したい英語テキストを選択します。
2. 選択範囲の近くに表示されるポップアップで内容を確認し、「翻訳」をクリックします。
3. ステータス欄が「翻訳中…」から「翻訳完了」に変わると全文が表示されます。

※ 現時点では翻訳履歴の閲覧機能はありません。

## 設定
- **オプションページの開き方**: Chromeツールバーの拡張アイコン → ピン留め済みならアイコンをクリックして「オプション」を選択、または`chrome://extensions`で該当拡張の「詳細」→「オプション」を選びます。
- **APIキー**: オプションページの入力欄にGemini APIキーを入力し「保存」を押すと、そのキーが`chrome.storage.local`に保存されます。保存後は入力欄が空欄に戻るため、必要に応じて別途メモしてください。
- **表示設定**: Chromeツールバーの拡張アイコンをクリックすると、翻訳バブルの文字サイズと横幅を調整できます。変更は即座に反映され、設定は保存されます。
- **その他の設定**: 現在はトーン切り替えや履歴件数の調整などの機能を提供していません。

## 制限事項
- 翻訳履歴の参照機能は未実装です。
- 丁寧語／カジュアルなどのトーン切り替え機能は未実装です。

## トラブルシューティング
- **403エラーが表示される**: APIキーが誤っている、Generative Language APIが有効化されていない、または利用制限に達しています。Google Cloud Consoleでキーと割り当てを確認し、オプションページで再設定してください。
- **Extension context invalidated**: Chromeのサービスワーカーが再起動した際の通知です。拡張を再読み込みし、もう一度翻訳を試してください。

## 要求される権限
- `activeTab`: 現在のタブで選択中のテキストを読み取り、ポップアップを描画するため。
- `scripting`: 必要に応じてコンテンツスクリプトを注入するため。
- `storage`: APIキーを保存するため。
- `contextMenus`（任意）: 右クリックメニューから翻訳を実行するため。

## ライセンスと注意事項
- Gemini Flashlight APIの利用にはGoogleの利用規約が適用されます。APIキーの管理や料金発生についてはご自身でご確認ください。
- 本拡張は開発中のプロジェクトです。予告なく仕様が変更される可能性があります。
